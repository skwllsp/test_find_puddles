        Алгоритм поиска всех луж в матрице

Алгоритм выполняет следующую последовательность шагов:

1. Составляется упорядоченный массив высот элементов матрицы.

1.1 Для отдельной высоты матрицы запоминается число элементов с такой высотой на 
этом уровне. В дальнейшем это используется для остановки поиска луж 
на определенной высоте, когда точно ясно, что все возможные лужи на данной 
высоте уже найдены.

1.2 Плюс если элементов с такой высотой на данном уровне не больше 
1% от N*M (MAX_SAVED_PER_LEVEL), то запоминаются элементы матрицы с данным 
уровнем. Это делается, для того, чтобы быстро находить возможные лужи если матрица 
очень большая, а луж мало.
   
2. Алгоритм выполняет в цикле обход упорядоченного массива высот, на которых 
возможно образование луж (эти данные получены на шаге 1).
  
2.1 Если есть список элементов матрицы с именно такой высотой (это данные из 
оптимизации 1.2), то обход идет только по ним и алгоритм для каждой такой точки
выполняет шаг 2.3.
  
2.2 Если список элементов матрицы с такой высотой пуст (так как элементов с 
этой высотой больше чем 1% от N*M), то обходятся все элементы 
матрицы.
 Если точка имеет высоту больше, чем та, которая сейчас рассматривается,
то такая точка пропускается. 
 Если уже было ранее найдено, что эта точка находится в луже или наоборот,
точно не находится в луже, то точка тоже пропускается
 Для точек которые не требуется пропускать алгоритм выполняет шаг 2.3 

2.3 Когда выбрана точка для проверки возможна в ней лужа или нет, то алгоритм
выполняет из этой точки поиск в ширину всех записей с такой же высотой.
 Алгоритм предполагает, что вода не просачивается через стыковку двух 
элементов по ребру.
 Если в ходе поиска в ширину алгоритм выйдет на ребро матрицы, то 
лужа невозможна.
 Если выхода на ребро матрицы не произошло, то найдена лужа. Если в ходе 
поиска данной лужи были найдены соседние точки с меньшей высотой, то это значит, 
что данную лужу надо объединить с более глубокой лужей, которая была найдена 
ранее. Это делается на шаге 2.4

2.4 Если найденная лужа включает другие лужи, то такие лужи сливаются в одну.

3. После обхода всех уровней алгоритм возвращает массив найденных луж


        Сложность алгоритма
 
1. time complexity

1.1 Составление упорядоченного набора высот - O(N*M)

1.2 Обход высот, обычный случай. Есть N*M разных высот в матрице и на почти на
каждой высоте элементов меньше чем MAX_SAVED_PER_LEVEL из описания алгоритма, 
пункт 1.2, то на каждом уровне будет, как правило, выполняться обход только 
сохраненных записей. Тогда сложность получается N*M.

1.2 Обход высот, худший случай. Для N*M матрицы временная сложность будет 
O(100*N*M).

1.2 space complexity
Дополнительная, помимо хранения элементов матрицы, space complexity O(N*M)
 

        Сборка

На Windows выполняется командой make из Cygwin, компилятор gcc.
На Linux выполняется тоже make.
Исполняемый файл find_puddles помещается в подкаталог build.

Сборка юнит тестов выполняется командой make test.
Исполняемый файл find_puddles_unittest.exe помещается в подкаталог build.test.

 
        Набор тестов и отчет по тестированию

Тесты находятся в файле matrix_unittest.cpp.

Вот пример (с небольшими сокращениями) запуска юниттестов:        
$ make test && ./build.test/find_puddles_unittest.exe
make: Nothing to be done for `test'.
Running main() from gtest_main.cc
[==========] Running 49 tests from 1 test case.
[----------] Global test environment set-up.
[----------] 49 tests from Matrix
[ RUN      ] Matrix.Zero1
[       OK ] Matrix.Zero1 (0 ms)
[ RUN      ] Matrix.One1
[       OK ] Matrix.One1 (0 ms)
[ RUN      ] Matrix.One2
[       OK ] Matrix.One2 (0 ms)
...
[ RUN      ] Matrix.Five14
[       OK ] Matrix.Five14 (0 ms)
[ RUN      ] Matrix.Five15
[       OK ] Matrix.Five15 (0 ms)
[----------] 49 tests from Matrix (16 ms total)

[----------] Global test environment tear-down
[==========] 49 tests from 1 test case ran. (32 ms total)
[  PASSED  ] 49 tests.
        

        Пример вывода программы
        
1. Ни одной лужи не найдено

$ ./build/find_puddles.exe < test1.txt
$
        
2. Найдено несколько луж

$ ./build/find_puddles.exe < test2.txt
height: 0, points: [{6,1}]
height: 1, points: [{1,1}, {1,2}]
